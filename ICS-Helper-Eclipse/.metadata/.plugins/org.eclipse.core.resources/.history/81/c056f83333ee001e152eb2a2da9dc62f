grammar ics.helper.HelperDSL with org.eclipse.xtext.common.Terminals

generate helperDSL "http://www.helper.ics/HelperDSL"

Model:
    commands+=Command*;

Command:
    CreateCommand | SplitCommand | MergeCommand | ModifyCommand;

CreateCommand:
    'create' 'schedule' name=ID '{'
        events+=Event*
    '}';

Event:
    'event' name=ID 
    'from' startTime=STRING 
    'to' endTime=STRING 
    ('at' location=STRING)?
    ('description' description=STRING)?
    ('link' link=STRING)?
    ('recur' recur=RecurRule (daysOfWeek=DaysOfWeek)?)?;
    
enum RecurRule:
    DAILY = 'daily' |
    WEEKLY = 'weekly' |
    MONTHLY = 'monthly' |
    YEARLY = 'yearly'|
    BYDAY = 'on';

DaysOfWeek: days+=[weekdays] (',' days+=[weekdays])*; // Example: "on Monday,Wednesday,Friday"

enum weekdays:
	MO = 'Monday' |
	TU = 'Tuesday' |
	WE = 'Wednesday' |
	TH = 'Thursday' |
	FR = 'Friday' |
	SA = 'Saturday' |
	SU = 'Sunday'
;
 
LoadAllICSCommand:
    'loadAllICS';

Schedule:
	name=ID;

SplitCommand:
    'split' schedule=[Schedule] 'by' criteria=STRING;

MergeCommand:
    'merge' schedules+=[Schedule]+ 'into' target=ID;

ModifyCommand:
    'modify' ('schedule' schedule=[Schedule] | 'event' event=[Event]) 'set' (time='time' value=STRING | 'owner' value=STRING | 'location' value=STRING);
